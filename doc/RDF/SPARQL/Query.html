<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: RDF::SPARQL::Query
  
    &mdash; Documentation by YARD 0.7.2
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (Q)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../RDF.html" title="RDF (module)">RDF</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../SPARQL.html" title="RDF::SPARQL (module)">SPARQL</a></span></span>
     &raquo; 
    <span class="title">Query</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">Class List</a>
  
    <a id="method_list_link" href="#">Method List</a>
  
    <a id="file_list_link" href="#">File List</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: RDF::SPARQL::Query
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Query</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Query</li>
          
            <li class="next">RDF::SPARQL::Query</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/rdf/sparql/query.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
A SPARQL query builder.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'><p>
Iterating over all found solutions
</p>
</div></h4>
      <pre class="example code"><span class='id query'>query</span><span class='period'>.</span><span class='id each_solution'>each_solution</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id solution'>solution</span><span class='op'>|</span> <span class='id puts'>puts</span> <span class='id solution'>solution</span><span class='period'>.</span><span class='id inspect'>inspect</span> <span class='rbrace'>}</span></pre>
    
  </div>

</div>

  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#form-instance_method" title="#form (instance method)">- (Symbol) <strong>form</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">- (Hash{Symbol =&gt; Object}) <strong>options</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#values-instance_method" title="#values (instance method)">- (Array&lt;[key, RDF::Value]&gt;) <strong>values</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

    
  </ul>



  

  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ask-class_method" title="ask (class method)">+ (Query) <strong>ask</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates a boolean `ASK` query.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clean_pattern-class_method" title="clean_pattern (class method)">+ (Object) <strong>clean_pattern</strong>(pattern) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#construct-class_method" title="construct (class method)">+ (Query) <strong>construct</strong>(*patterns) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates a graph `CONSTRUCT` query.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#describe-class_method" title="describe (class method)">+ (Query) <strong>describe</strong>(*variables) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates a `DESCRIBE` query.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from-class_method" title="from (class method)">+ (Object) <strong>from</strong>(pattern) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
BY RIK transforms a RDF::Query or RDF::Query::Pattern in a
RDF::SPARQL::Query Note: unless pattern is already a RDF::SPARQL::Query,
this will always return a construct query.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select-class_method" title="select (class method)">+ (Query) <strong>select</strong>(*variables) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates a tuple `SELECT` query.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3C%3C-instance_method" title="#&lt;&lt; (instance method)">- (Object) <strong>&lt;&lt;</strong>(pattern) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ask-instance_method" title="#ask (instance method)">- (Query) <strong>ask</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_patterns-instance_method" title="#build_patterns (instance method)">- (Object) <strong>build_patterns</strong>(patterns) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#construct-instance_method" title="#construct (instance method)">- (Query) <strong>construct</strong>(*patterns) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#describe-instance_method" title="#describe (instance method)">- (Query) <strong>describe</strong>(*variables) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#distinct-instance_method" title="#distinct (instance method)">- (Query) <strong>distinct</strong>(state = true) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each_statement-instance_method" title="#each_statement (instance method)">- (Enumerator) <strong>each_statement</strong> {|statement| ... }</a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-instance_method" title="#execute (instance method)">- (Object) <strong>execute</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#false%3F-instance_method" title="#false? (instance method)">- (Boolean) <strong>false?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#filter-instance_method" title="#filter (instance method)">- (Object) <strong>filter</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#from-instance_method" title="#from (instance method)">- (Query) <strong>from</strong>(uri) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group_patterns-instance_method" title="#group_patterns (instance method)">- (Object) <strong>group_patterns</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
BY RIK Divides patterns in groups that have variables in common.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Query) <strong>initialize</strong>(form = :ask, options = {}) {|query| ... }</a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of Query.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">- (String) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a developer-friendly representation of this query.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect%21-instance_method" title="#inspect! (instance method)">- (void) <strong>inspect!</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Outputs a developer-friendly representation of this query to `stderr`.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#limit-instance_method" title="#limit (instance method)">- (Query) <strong>limit</strong>(length) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#offset-instance_method" title="#offset (instance method)">- (Query) <strong>offset</strong>(start) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#optional-instance_method" title="#optional (instance method)">- (Query) <strong>optional</strong>(*patterns) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#order-instance_method" title="#order (instance method)">- (Query) <strong>order</strong>(*variables) </a>
    

    
      (also: #order_by)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prefix-instance_method" title="#prefix (instance method)">- (Query) <strong>prefix</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reduced-instance_method" title="#reduced (instance method)">- (Query) <strong>reduced</strong>(state = true) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#result-instance_method" title="#result (instance method)">- (Object) <strong>result</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select-instance_method" title="#select (instance method)">- (Query) <strong>select</strong>(*variables) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#serialize_patterns-instance_method" title="#serialize_patterns (instance method)">- (Object) <strong>serialize_patterns</strong>(patterns, extended = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
BY RIK: added optional? and context handling,  new option allows not to use
them  (e.g.: for construct templates).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#serialize_value-instance_method" title="#serialize_value (instance method)">- (String) <strong>serialize_value</strong>(value) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Serializes an RDF::Value into a format appropriate for select, construct,
and where clauses.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#slice-instance_method" title="#slice (instance method)">- (Query) <strong>slice</strong>(start, length) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#solutions-instance_method" title="#solutions (instance method)">- (Enumerable&lt;RDF::Query::Solution&gt;) <strong>solutions</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">- (String) <strong>to_s</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
BY RIK: changed to allow for contexts, optional patterns and advanced
pattern querying.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#true%3F-instance_method" title="#true? (instance method)">- (Boolean) <strong>true?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#where-instance_method" title="#where (instance method)">- (Query) <strong>where</strong>(*patterns) </a>
    

    
      (also: #whether)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#where_clause-instance_method" title="#where_clause (instance method)">- (Object) <strong>where_clause</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
BY RIK Prepare patterns for WHERE clause, using UNION when necessary.
</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>initialize</strong>(form = :ask, options = {}) {|query| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of Query
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>form</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>, <tt>#to_s</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>:ask</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; Object}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>
<h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>query</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'></span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 99</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id form'>form</span> <span class='op'>=</span> <span class='symbol'>:ask</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@form</span> <span class='op'>=</span> <span class='id form'>form</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:to_sym</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id form'>form</span><span class='period'>.</span><span class='id to_sym'>to_sym</span> <span class='op'>:</span> <span class='id form'>form</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='id options'>options</span><span class='period'>.</span><span class='id dup'>dup</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="form-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="form-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>) <strong>form</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#QueryForms" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#QueryForms">http://www.w3.org/TR/rdf-sparql-query/#QueryForms</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 12</span>

<span class='kw'>def</span> <span class='id form'>form</span>
  <span class='ivar'>@form</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="options-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="options-instance_method">
  
    - (<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; Object}</tt>) <strong>options</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; Object}</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 16</span>

<span class='kw'>def</span> <span class='id options'>options</span>
  <span class='ivar'>@options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="values-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="values-instance_method">
  
    - (<tt>Array&lt;[key, RDF::Value]&gt;</tt>) <strong>values</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;[key, RDF::Value]&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 20</span>

<span class='kw'>def</span> <span class='id values'>values</span>
  <span class='ivar'>@values</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="ask-class_method">
  
    + (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>ask</strong>(options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates a boolean `ASK` query.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; Object}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#ask" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#ask">http://www.w3.org/TR/rdf-sparql-query/#ask</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 54</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id ask'>ask</span><span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:ask</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="clean_pattern-class_method">
  
    + (<tt>Object</tt>) <strong>clean_pattern</strong>(pattern) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


439
440
441
442
443
444</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 439</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id clean_pattern'>clean_pattern</span><span class='lparen'>(</span><span class='id pattern'>pattern</span><span class='rparen'>)</span>
  <span class='id pattern'>pattern</span><span class='period'>.</span><span class='id subject'>subject</span>   <span class='op'>||=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span><span class='op'>::</span><span class='const'>Variable</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id pattern'>pattern</span><span class='period'>.</span><span class='id predicate'>predicate</span> <span class='op'>||=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span><span class='op'>::</span><span class='const'>Variable</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id pattern'>pattern</span><span class='period'>.</span><span class='id object'>object</span>    <span class='op'>||=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span><span class='op'>::</span><span class='const'>Variable</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id pattern'>pattern</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="construct-class_method">
  
    + (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>construct</strong>(*patterns) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates a graph `CONSTRUCT` query.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>patterns</span>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Pattern, Array&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; Object}</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#construct" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#construct">http://www.w3.org/TR/rdf-sparql-query/#construct</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 89</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id construct'>construct</span><span class='lparen'>(</span><span class='op'>*</span><span class='id patterns'>patterns</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id patterns'>patterns</span><span class='period'>.</span><span class='id last'>last</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id patterns'>patterns</span><span class='period'>.</span><span class='id pop'>pop</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:construct</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id construct'>construct</span><span class='lparen'>(</span><span class='op'>*</span><span class='id patterns'>patterns</span><span class='rparen'>)</span> <span class='comment'># FIXME
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="describe-class_method">
  
    + (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>describe</strong>(*variables) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates a `DESCRIBE` query.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>variables</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>, RDF::URI&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; Object}</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#describe" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#describe">http://www.w3.org/TR/rdf-sparql-query/#describe</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 77</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id describe'>describe</span><span class='lparen'>(</span><span class='op'>*</span><span class='id variables'>variables</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id variables'>variables</span><span class='period'>.</span><span class='id last'>last</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id variables'>variables</span><span class='period'>.</span><span class='id pop'>pop</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:describe</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id describe'>describe</span><span class='lparen'>(</span><span class='op'>*</span><span class='id variables'>variables</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="from-class_method">
  
    + (<tt>Object</tt>) <strong>from</strong>(pattern) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
BY RIK transforms a RDF::Query or RDF::Query::Pattern in a
RDF::SPARQL::Query Note: unless pattern is already a RDF::SPARQL::Query,
this will always return a construct query.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 27</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id from'>from</span><span class='lparen'>(</span><span class='id pattern'>pattern</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id pattern'>pattern</span>
    <span class='comment'># A SPARQL query:
</span>    <span class='kw'>when</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>SPARQL</span><span class='op'>::</span><span class='const'>Query</span> <span class='kw'>then</span> <span class='id pattern'>pattern</span>
    <span class='comment'># A basic graph pattern (BGP):
</span>    <span class='kw'>when</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span>
      <span class='id result'>result</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:construct</span><span class='rparen'>)</span>
      <span class='id pattern'>pattern</span><span class='period'>.</span><span class='id patterns'>patterns</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id query_pattern'>query_pattern</span><span class='op'>|</span>
        <span class='id query_pattern'>query_pattern</span> <span class='op'>=</span> <span class='id clean_pattern'>clean_pattern</span> <span class='id query_pattern'>query_pattern</span>
        <span class='lparen'>(</span><span class='id result'>result</span><span class='period'>.</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:template</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='id query_pattern'>query_pattern</span>
        <span class='id result'>result</span><span class='period'>.</span><span class='id where'>where</span> <span class='id query_pattern'>query_pattern</span>
      <span class='kw'>end</span>
      <span class='id result'>result</span>
      <span class='comment'># A simple triple/quad pattern query:
</span>    <span class='kw'>else</span>
      <span class='id pattern'>pattern</span> <span class='op'>=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span><span class='op'>::</span><span class='const'>Pattern</span><span class='period'>.</span><span class='id from'>from</span> <span class='id pattern'>pattern</span>
      <span class='id pattern'>pattern</span> <span class='op'>=</span> <span class='id clean_pattern'>clean_pattern</span> <span class='id pattern'>pattern</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id construct'>construct</span><span class='lparen'>(</span><span class='id pattern'>pattern</span><span class='rparen'>)</span><span class='period'>.</span><span class='id where'>where</span> <span class='id pattern'>pattern</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="select-class_method">
  
    + (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>select</strong>(*variables) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates a tuple `SELECT` query.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>variables</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>Hash{<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span> =&gt; Object}</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#select" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#select">http://www.w3.org/TR/rdf-sparql-query/#select</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


65
66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 65</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id select'>select</span><span class='lparen'>(</span><span class='op'>*</span><span class='id variables'>variables</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id variables'>variables</span><span class='period'>.</span><span class='id last'>last</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id variables'>variables</span><span class='period'>.</span><span class='id pop'>pop</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:select</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span><span class='period'>.</span><span class='id select'>select</span><span class='lparen'>(</span><span class='op'>*</span><span class='id variables'>variables</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="<<-instance_method">
  
    - (<tt>Object</tt>) <strong>&lt;&lt;</strong>(pattern) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <h3>See Also:</h3>
  <ul class="see">
    
      <li>Query#&lt;&lt;</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 106</span>

<span class='kw'>def</span> <span class='op'>&lt;&lt;</span><span class='lparen'>(</span><span class='id pattern'>pattern</span><span class='rparen'>)</span>
  <span class='ivar'>@patterns</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id clean_pattern'>clean_pattern</span><span class='lparen'>(</span><span class='const'>Pattern</span><span class='period'>.</span><span class='id from'>from</span><span class='lparen'>(</span><span class='id pattern'>pattern</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ask-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>ask</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#ask" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#ask">http://www.w3.org/TR/rdf-sparql-query/#ask</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116
117</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 114</span>

<span class='kw'>def</span> <span class='id ask'>ask</span>
  <span class='ivar'>@form</span> <span class='op'>=</span> <span class='symbol'>:ask</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="build_patterns-instance_method">
  
    - (<tt>Object</tt>) <strong>build_patterns</strong>(patterns) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


241
242
243
244
245
246
247
248
249</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 241</span>

<span class='kw'>def</span> <span class='id build_patterns'>build_patterns</span><span class='lparen'>(</span><span class='id patterns'>patterns</span><span class='rparen'>)</span>
  <span class='id patterns'>patterns</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id pattern'>pattern</span><span class='op'>|</span>
    <span class='id pattern'>pattern</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id pattern'>pattern</span>
      <span class='kw'>when</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span><span class='op'>::</span><span class='const'>Pattern</span> <span class='kw'>then</span> <span class='id pattern'>pattern</span>
      <span class='kw'>else</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span><span class='op'>::</span><span class='const'>Pattern</span><span class='period'>.</span><span class='id from'>from</span><span class='lparen'>(</span><span class='id pattern'>pattern</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id clean_pattern'>clean_pattern</span> <span class='id pattern'>pattern</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="construct-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>construct</strong>(*patterns) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>patterns</span>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Pattern, Array&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144
145</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 142</span>

<span class='kw'>def</span> <span class='id construct'>construct</span><span class='lparen'>(</span><span class='op'>*</span><span class='id patterns'>patterns</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:template</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id build_patterns'>build_patterns</span><span class='lparen'>(</span><span class='id patterns'>patterns</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="describe-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>describe</strong>(*variables) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>variables</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#describe" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#describe">http://www.w3.org/TR/rdf-sparql-query/#describe</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 132</span>

<span class='kw'>def</span> <span class='id describe'>describe</span><span class='lparen'>(</span><span class='op'>*</span><span class='id variables'>variables</span><span class='rparen'>)</span>
  <span class='ivar'>@values</span> <span class='op'>=</span> <span class='id variables'>variables</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id var'>var</span><span class='op'>|</span>
    <span class='lbracket'>[</span><span class='id var'>var</span><span class='comma'>,</span> <span class='id var'>var</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>RDF</span><span class='op'>::</span><span class='const'>URI</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id var'>var</span> <span class='op'>:</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span><span class='op'>::</span><span class='const'>Variable</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id var'>var</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="distinct-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>distinct</strong>(state = true) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#modDistinct" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#modDistinct">http://www.w3.org/TR/rdf-sparql-query/#modDistinct</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


179
180
181
182</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 179</span>

<span class='kw'>def</span> <span class='id distinct'>distinct</span><span class='lparen'>(</span><span class='id state'>state</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:distinct</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id state'>state</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="each_statement-instance_method">
  
    - (<tt>Enumerator</tt>) <strong>each_statement</strong> {|statement| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>statement</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Yield Parameters:</h3>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'></span>
      
      
        <span class='type'>(<tt>RDF::Statement</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Enumerator</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


284
285
286</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 284</span>

<span class='kw'>def</span> <span class='id each_statement'>each_statement</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id result'>result</span><span class='period'>.</span><span class='id each_statement'>each_statement</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="execute-instance_method">
  
    - (<tt>Object</tt>) <strong>execute</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


296
297
298</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 296</span>

<span class='kw'>def</span> <span class='id execute'>execute</span>
  <span class='id raise'>raise</span> <span class='const'>NotImplementedError</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="false?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>false?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 270</span>

<span class='kw'>def</span> <span class='id false?'>false?</span>
  <span class='op'>!</span><span class='id true?'>true?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="filter-instance_method">
  
    - (<tt>Object</tt>) <strong>filter</strong>(string) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


253
254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 253</span>

<span class='kw'>def</span> <span class='id filter'>filter</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:filters</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='id string'>string</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="from-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>from</strong>(uri) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>RDF::URI</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><p>
uri
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#specDataset" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#specDataset">http://www.w3.org/TR/rdf-sparql-query/#specDataset</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


150
151
152
153</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 150</span>

<span class='kw'>def</span> <span class='id from'>from</span><span class='lparen'>(</span><span class='id uri'>uri</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:from</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id uri'>uri</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="group_patterns-instance_method">
  
    - (<tt>Object</tt>) <strong>group_patterns</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
BY RIK Divides patterns in groups that have variables in common. The result
will be used in #where_clause to build UNION clauses. FIXME: does not
really work&#8230;
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 360</span>

<span class='kw'>def</span> <span class='id group_patterns'>group_patterns</span>
  <span class='id groups'>groups</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id patterns'>patterns</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id pattern'>pattern</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id pattern'>pattern</span><span class='period'>.</span><span class='id has_variables?'>has_variables?</span>
      <span class='lparen'>(</span><span class='id groups'>groups</span><span class='lbracket'>[</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='id pattern'>pattern</span>
    <span class='kw'>else</span>
      <span class='id variables'>variables</span> <span class='op'>=</span> <span class='id pattern'>pattern</span><span class='period'>.</span><span class='id variables'>variables</span><span class='period'>.</span><span class='id keys'>keys</span>
      <span class='id found'>found</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id groups'>groups</span><span class='period'>.</span><span class='id each_key'>each_key</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id keys'>keys</span><span class='op'>|</span> <span class='id found'>found</span> <span class='op'>=</span> <span class='id keys'>keys</span> <span class='kw'>unless</span> <span class='lparen'>(</span><span class='id keys'>keys</span> <span class='op'>&amp;</span> <span class='id variables'>variables</span><span class='rparen'>)</span><span class='period'>.</span><span class='id empty?'>empty?</span><span class='rbrace'>}</span>
      <span class='kw'>if</span> <span class='id found'>found</span>
        <span class='id groups'>groups</span><span class='lbracket'>[</span><span class='id variables'>variables</span> <span class='op'>|</span> <span class='id found'>found</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id groups'>groups</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='id found'>found</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='id pattern'>pattern</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id groups'>groups</span><span class='lbracket'>[</span><span class='id variables'>variables</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id pattern'>pattern</span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id groups'>groups</span><span class='period'>.</span><span class='id dup'>dup</span><span class='period'>.</span><span class='id each_pair'>each_pair</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id keys'>keys</span><span class='comma'>,</span> <span class='id patterns'>patterns</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id keys'>keys</span> <span class='op'>!=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>and</span> <span class='id patterns'>patterns</span><span class='period'>.</span><span class='id count'>count</span> <span class='op'>==</span> <span class='int'>1</span>
      <span class='lparen'>(</span><span class='id groups'>groups</span><span class='lbracket'>[</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id concat'>concat</span> <span class='id groups'>groups</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='id keys'>keys</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inspect-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>inspect</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a developer-friendly representation of this query.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


419
420
421</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 419</span>

<span class='kw'>def</span> <span class='id inspect'>inspect</span>
  <span class='id sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;%s:%#0x(%s)&gt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id __id__'>__id__</span><span class='comma'>,</span> <span class='id to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inspect!-instance_method">
  
    - (<tt>void</tt>) <strong>inspect!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>
Outputs a developer-friendly representation of this query to `stderr`.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


410
411
412
413</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 410</span>

<span class='kw'>def</span> <span class='id inspect!'>inspect!</span>
  <span class='id warn'>warn</span><span class='lparen'>(</span><span class='id inspect'>inspect</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="limit-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>limit</strong>(length) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>length</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>#to_i</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#modResultLimit" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#modResultLimit">http://www.w3.org/TR/rdf-sparql-query/#modResultLimit</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 204</span>

<span class='kw'>def</span> <span class='id limit'>limit</span><span class='lparen'>(</span><span class='id length'>length</span><span class='rparen'>)</span>
  <span class='id slice'>slice</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id length'>length</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="offset-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>offset</strong>(start) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>start</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>#to_i</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#modOffset" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#modOffset">http://www.w3.org/TR/rdf-sparql-query/#modOffset</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


196
197
198</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 196</span>

<span class='kw'>def</span> <span class='id offset'>offset</span><span class='lparen'>(</span><span class='id start'>start</span><span class='rparen'>)</span>
  <span class='id slice'>slice</span><span class='lparen'>(</span><span class='id start'>start</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="optional-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>optional</strong>(*patterns) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#optionals" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#optionals">http://www.w3.org/TR/rdf-sparql-query/#optionals</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


229
230
231
232
233
234
235
236
237</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 229</span>

<span class='kw'>def</span> <span class='id optional'>optional</span><span class='lparen'>(</span><span class='op'>*</span><span class='id patterns'>patterns</span><span class='rparen'>)</span>
  <span class='comment'># (options[:optionals] ||= []) &lt;&lt; build_patterns(patterns)
</span>  <span class='comment'># BY RIK
</span>  <span class='ivar'>@patterns</span> <span class='op'>+=</span> <span class='id build_patterns'>build_patterns</span><span class='lparen'>(</span><span class='id patterns'>patterns</span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id pattern'>pattern</span><span class='op'>|</span>
    <span class='id pattern'>pattern</span><span class='period'>.</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:optional</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='id pattern'>pattern</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="order-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>order</strong>(*variables) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='order_by-instance_method'>order_by</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>variables</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>, <span class='object_link'><a href="../../String.html" title="String (class)">String</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#modOrderBy" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#modOrderBy">http://www.w3.org/TR/rdf-sparql-query/#modOrderBy</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 169</span>

<span class='kw'>def</span> <span class='id order'>order</span><span class='lparen'>(</span><span class='op'>*</span><span class='id variables'>variables</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:order_by</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id variables'>variables</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="prefix-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>prefix</strong>(string) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#prefNames" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#prefNames">http://www.w3.org/TR/rdf-sparql-query/#prefNames</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


221
222
223
224</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 221</span>

<span class='kw'>def</span> <span class='id prefix'>prefix</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span>
  <span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:prefixes</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&lt;&lt;</span> <span class='id string'>string</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reduced-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>reduced</strong>(state = true) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#modReduced" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#modReduced">http://www.w3.org/TR/rdf-sparql-query/#modReduced</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 187</span>

<span class='kw'>def</span> <span class='id reduced'>reduced</span><span class='lparen'>(</span><span class='id state'>state</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:reduced</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id state'>state</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="result-instance_method">
  
    - (<tt>Object</tt>) <strong>result</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


290
291
292</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 290</span>

<span class='kw'>def</span> <span class='id result'>result</span>
  <span class='ivar'>@result</span> <span class='op'>||=</span> <span class='id execute'>execute</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="select-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>select</strong>(*variables) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>variables</span>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="../../Symbol.html" title="Symbol (class)">Symbol</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#select" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#select">http://www.w3.org/TR/rdf-sparql-query/#select</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


123
124
125
126</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 123</span>

<span class='kw'>def</span> <span class='id select'>select</span><span class='lparen'>(</span><span class='op'>*</span><span class='id variables'>variables</span><span class='rparen'>)</span>
  <span class='ivar'>@values</span> <span class='op'>=</span> <span class='id variables'>variables</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id var'>var</span><span class='op'>|</span> <span class='lbracket'>[</span><span class='id var'>var</span><span class='comma'>,</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span><span class='op'>::</span><span class='const'>Variable</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id var'>var</span><span class='rparen'>)</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="serialize_patterns-instance_method">
  
    - (<tt>Object</tt>) <strong>serialize_patterns</strong>(patterns, extended = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
BY RIK: added optional? and context handling,  new option allows not to use
them  (e.g.: for construct templates).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 388</span>

<span class='kw'>def</span> <span class='id serialize_patterns'>serialize_patterns</span><span class='lparen'>(</span><span class='id patterns'>patterns</span><span class='comma'>,</span> <span class='id extended'>extended</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id patterns'>patterns</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='kw'>or</span> <span class='id patterns'>patterns</span><span class='period'>.</span><span class='id empty?'>empty?</span>
  <span class='id patterns'>patterns</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id p'>p</span><span class='op'>|</span>
    <span class='comment'># No blank nodes in CONSTRUCT clause.
</span>    <span class='kw'>unless</span> <span class='id p'>p</span><span class='period'>.</span><span class='id has_blank_nodes?'>has_blank_nodes?</span> <span class='kw'>and</span> <span class='op'>!</span><span class='id extended'>extended</span>
      <span class='id serialized'>serialized</span> <span class='op'>=</span> <span class='id p'>p</span><span class='period'>.</span><span class='id to_triple'>to_triple</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id v'>v</span><span class='op'>|</span> <span class='id serialize_value'>serialize_value</span><span class='lparen'>(</span><span class='id v'>v</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> .</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>if</span> <span class='id extended'>extended</span>
        <span class='id serialized'>serialized</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OPTIONAL {</span><span class='embexpr_beg'>#{</span><span class='id serialized'>serialized</span><span class='rbrace'>}</span><span class='tstring_content'>} .</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id p'>p</span><span class='period'>.</span><span class='id optional?'>optional?</span>
        <span class='kw'>unless</span> <span class='id p'>p</span><span class='period'>.</span><span class='id context'>context</span><span class='period'>.</span><span class='id nil?'>nil?</span>
          <span class='id graph'>graph</span> <span class='op'>=</span> <span class='id p'>p</span><span class='period'>.</span><span class='id context'>context</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span><span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>?</span><span class='embexpr_beg'>#{</span><span class='id p'>p</span><span class='period'>.</span><span class='id context'>context</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;</span><span class='embexpr_beg'>#{</span><span class='id p'>p</span><span class='period'>.</span><span class='id context'>context</span><span class='rbrace'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
          <span class='id serialized'>serialized</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GRAPH </span><span class='embexpr_beg'>#{</span><span class='id graph'>graph</span><span class='rbrace'>}</span><span class='tstring_content'> {</span><span class='embexpr_beg'>#{</span><span class='id serialized'>serialized</span><span class='rbrace'>}</span><span class='tstring_content'>} .</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='id serialized'>serialized</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id compact'>compact</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="serialize_value-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>serialize_value</strong>(value) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Serializes an RDF::Value into a format appropriate for select, construct,
and where clauses
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'></span>
      
      
        <span class='type'>(<tt>RDF::Value</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


429
430
431
432
433
434
435
436
437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 429</span>

<span class='kw'>def</span> <span class='id serialize_value'>serialize_value</span><span class='lparen'>(</span><span class='id value'>value</span><span class='rparen'>)</span>
  <span class='comment'># SPARQL queries are UTF-8, but support ASCII-style Unicode escapes, so
</span>  <span class='comment'># the N-Triples serializer is fine unless it's a variable:
</span>  <span class='id value'>value</span> <span class='op'>=</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>Query</span><span class='op'>::</span><span class='const'>Variable</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>if</span> <span class='id value'>value</span><span class='period'>.</span><span class='id nil?'>nil?</span>
  <span class='kw'>case</span>
    <span class='kw'>when</span> <span class='id value'>value</span><span class='period'>.</span><span class='id variable?'>variable?</span> <span class='kw'>then</span> <span class='id value'>value</span><span class='period'>.</span><span class='id to_s'>to_s</span>
    <span class='kw'>else</span> <span class='const'>RDF</span><span class='op'>::</span><span class='const'>NTriples</span><span class='period'>.</span><span class='id serialize'>serialize</span><span class='lparen'>(</span><span class='id value'>value</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="slice-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>slice</strong>(start, length) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>start</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>#to_i</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>length</span>
      
      
        <span class='type'>(<tt>Integer</tt>, <tt>#to_i</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214
215
216</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 212</span>

<span class='kw'>def</span> <span class='id slice'>slice</span><span class='lparen'>(</span><span class='id start'>start</span><span class='comma'>,</span> <span class='id length'>length</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id start'>start</span><span class='period'>.</span><span class='id to_i'>to_i</span> <span class='kw'>if</span> <span class='id start'>start</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:limit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id length'>length</span><span class='period'>.</span><span class='id to_i'>to_i</span> <span class='kw'>if</span> <span class='id length'>length</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="solutions-instance_method">
  
    - (<tt>Enumerable&lt;RDF::Query::Solution&gt;</tt>) <strong>solutions</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Enumerable&lt;RDF::Query::Solution&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


276
277
278</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 276</span>

<span class='kw'>def</span> <span class='id solutions'>solutions</span>
  <span class='id result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_s-instance_method">
  
    - (<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>) <strong>to_s</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
BY RIK: changed to allow for contexts, optional patterns and advanced
pattern querying. Returns the string representation of this query.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../../String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 305</span>

<span class='kw'>def</span> <span class='id to_s'>to_s</span>
  <span class='id buffer'>buffer</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id form'>form</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id upcase'>upcase</span><span class='rbracket'>]</span>
  <span class='kw'>case</span> <span class='id form'>form</span>
    <span class='kw'>when</span> <span class='symbol'>:select</span><span class='comma'>,</span> <span class='symbol'>:describe</span>
      <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>DISTINCT</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:distinct</span><span class='rbracket'>]</span>
      <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>REDUCED</span><span class='tstring_end'>'</span></span>  <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:reduced</span><span class='rbracket'>]</span>
      <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id values'>values</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>*</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='id values'>values</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id v'>v</span><span class='op'>|</span> <span class='id serialize_value'>serialize_value</span><span class='lparen'>(</span><span class='id v'>v</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='symbol'>:construct</span>
      <span class='id templates'>templates</span> <span class='op'>=</span> <span class='id serialize_patterns'>serialize_patterns</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:template</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
      <span class='comment'># Special case: if template contained only patterns with blank nodes,
</span>      <span class='comment'># then there is nothing here. Adding a default template to avoid an error.
</span>      <span class='id templates'>templates</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>?_s</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>?_p</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>?_o</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id templates'>templates</span><span class='period'>.</span><span class='id empty?'>empty?</span>
      <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{</span><span class='tstring_end'>'</span></span>
      <span class='id buffer'>buffer</span> <span class='op'>+=</span> <span class='id templates'>templates</span>
      <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>}</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
  <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FROM </span><span class='embexpr_beg'>#{</span><span class='id serialize_value'>serialize_value</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:from</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:from</span><span class='rbracket'>]</span>

  <span class='kw'>unless</span> <span class='id patterns'>patterns</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>WHERE {</span><span class='tstring_end'>'</span></span>
    <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='id where_clause'>where_clause</span>
    
    <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:filters</span><span class='rbracket'>]</span>
      <span class='id buffer'>buffer</span> <span class='op'>+=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:filters</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id filter'>filter</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FILTER(</span><span class='embexpr_beg'>#{</span><span class='id filter'>filter</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='kw'>end</span>
    <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>}</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:order_by</span><span class='rbracket'>]</span>
    <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ORDER BY</span><span class='tstring_end'>'</span></span>
    <span class='id buffer'>buffer</span> <span class='op'>+=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:order_by</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id var'>var</span><span class='op'>|</span> <span class='id var'>var</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id var'>var</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>?</span><span class='embexpr_beg'>#{</span><span class='id var'>var</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OFFSET </span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:offset</span><span class='rbracket'>]</span>
  <span class='id buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LIMIT </span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:limit</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>   <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:limit</span><span class='rbracket'>]</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:prefixes</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id reverse'>reverse</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id e'>e</span><span class='op'>|</span> <span class='id buffer'>buffer</span><span class='period'>.</span><span class='id unshift'>unshift</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PREFIX </span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:prefixes</span><span class='rbracket'>]</span>

  <span class='id buffer'>buffer</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="true?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>true?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


260
261
262
263
264
265
266</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 260</span>

<span class='kw'>def</span> <span class='id true?'>true?</span>
  <span class='kw'>case</span> <span class='id result'>result</span>
    <span class='kw'>when</span> <span class='const'>TrueClass</span><span class='comma'>,</span> <span class='const'>FalseClass</span> <span class='kw'>then</span> <span class='id result'>result</span>
    <span class='kw'>when</span> <span class='const'>Enumerable</span> <span class='kw'>then</span> <span class='op'>!</span><span class='id result'>result</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='kw'>else</span> <span class='kw'>false</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="where-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>) <strong>where</strong>(*patterns) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='whether-instance_method'>whether</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='name'>patterns</span>
      
      
        <span class='type'>(<tt>Array&lt;RDF::Query::Pattern, Array&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="RDF::SPARQL::Query (class)">Query</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <h3>See Also:</h3>
  <ul class="see">
    
      <li><a href="http://www.w3.org/TR/rdf-sparql-query/#GraphPattern" target="_parent" title="http://www.w3.org/TR/rdf-sparql-query/#GraphPattern">http://www.w3.org/TR/rdf-sparql-query/#GraphPattern</a></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 159</span>

<span class='kw'>def</span> <span class='id where'>where</span><span class='lparen'>(</span><span class='op'>*</span><span class='id patterns'>patterns</span><span class='rparen'>)</span>
  <span class='ivar'>@patterns</span> <span class='op'>+=</span> <span class='id build_patterns'>build_patterns</span><span class='lparen'>(</span><span class='id patterns'>patterns</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="where_clause-instance_method">
  
    - (<tt>Object</tt>) <strong>where_clause</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
BY RIK Prepare patterns for WHERE clause, using UNION when necessary.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


348
349
350
351
352
353</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rdf/sparql/query.rb', line 348</span>

<span class='kw'>def</span> <span class='id where_clause'>where_clause</span>
  <span class='kw'>return</span> <span class='id serialize_patterns'>serialize_patterns</span><span class='lparen'>(</span><span class='id patterns'>patterns</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id form'>form</span> <span class='op'>==</span> <span class='symbol'>:select</span>
  <span class='id groups'>groups</span> <span class='op'>=</span> <span class='id group_patterns'>group_patterns</span>
  <span class='kw'>return</span> <span class='id serialize_patterns'>serialize_patterns</span><span class='lparen'>(</span><span class='id groups'>groups</span><span class='period'>.</span><span class='id values'>values</span><span class='period'>.</span><span class='id first'>first</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id groups'>groups</span><span class='period'>.</span><span class='id count'>count</span> <span class='op'>&lt;=</span> <span class='int'>1</span>
  <span class='id groups'>groups</span><span class='period'>.</span><span class='id values'>values</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id patterns'>patterns</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>{</span><span class='embexpr_beg'>#{</span><span class='id serialize_patterns'>serialize_patterns</span><span class='lparen'>(</span><span class='id patterns'>patterns</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> UNION </span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Aug 25 17:54:19 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.7.2 (ruby-1.9.2).
</div>

  </body>
</html>